<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>waze2gpx: Waze trip history to GPX converter</title>
        <script type="text/javascript" src="waze2gpx.js" defer></script>

        <!--
            xml-formatter
            https://github.com/chrisbottin/xml-formatter
            https://www.jsdelivr.com/package/npm/xml-formatter
        -->
        <script src="https://cdn.jsdelivr.net/npm/xml-formatter@3.6.3/dist/browser/xml-formatter-singleton.min.js"></script>

        <!-- 
            highlight.js
            https://highlightjs.org
        -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    </head>

    <body>
        <h1>Convert Waze trip history to GPX file</h1>

        <h2>Step 1: Export personal data from Waze</h2>
        <p>Request and download data archive from <a href="https://www.waze.com/account/download_data">https://www.waze.com/account/download_data</a>, then extract the "account_activity_3.csv" file from password-protected archive</p>

        <h2>Step 2: Upload the account_activity_3.csv file</h2>
        <form id="fileForm">
            <label for="fileUpload">Choose a account_activity_3.csv file:</label>
            <input type="file" id="fileUpload" name="fileUpload" accept=".csv">
            <button type="submit">Upload</button>
            <span id="fileFormErrorBox"></span>
        </form>

        <h2>Step 3: Download trip data in GPX format</h2>
        <p>
            GPX file: <a id="downloadXmlLink" style="display: none;">account_activity_3.gpx</a>
        </p>
        <pre>
            <code id="filePreview">
            </code>
        </pre>
    </body>

</html>
